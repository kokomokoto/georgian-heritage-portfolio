<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <title>рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃарЃћрЃЊрЃљрЃЦрЃбрЃўрЃарЃћрЃЉрЃљ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1>рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃарЃћрЃЊрЃљрЃЦрЃбрЃўрЃарЃћрЃЉрЃљ</h1>
    <form method="post" enctype="multipart/form-data">
        <div class="mb-3">
            <label class="form-label">рЃАрЃљрЃЌрЃљрЃБрЃарЃў *</label>
            <input type="text" name="title" class="form-control" value="{{ project.title }}" required>
        </div>
        <div class="mb-3">
            <label class="form-label">рЃљрЃдрЃгрЃћрЃарЃљ</label>
            <textarea name="description" class="form-control" rows="30">{{ description }}</textarea>
        </div>
        <div class="mb-3">
            <label class="form-label">3D viewer (iframe рЃљрЃю URL)</label>
            <input type="text" name="viewer3d" class="form-control" value="{{ project.viewer3D }}">
        </div>
        <div class="mb-3">
            <label class="form-label">Loading рЃЋрЃўрЃЊрЃћрЃЮ URL (3D viewer-рЃўрЃА рЃЕрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљрЃЏрЃЊрЃћ)</label>
            <input type="text" name="loading_video" class="form-control" value="{{ project.loading_video|default('') }}" placeholder="рЃЏрЃљрЃњ: https://example.com/loading-video.mp4">
        </div>
        <div class="mb-3">
            <label class="form-label">Loading рЃЏрЃБрЃАрЃўрЃЎрЃљ URL (3D viewer-рЃўрЃА рЃЕрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљрЃЏрЃЊрЃћ)</label>
            <input type="text" name="loading_audio" class="form-control" value="{{ project.loading_audio|default('') }}" placeholder="рЃЏрЃљрЃњ: https://example.com/loading-music.mp3">
        </div>
        <div class="mb-3">
            <label class="form-label">рЃљрЃЊрЃњрЃўрЃџрЃЏрЃЊрЃћрЃЉрЃљрЃарЃћрЃЮрЃЉрЃљ (Latitude)</label>
            <input type="text" name="latitude" class="form-control" value="{{ project.latitude|default('') }}" placeholder="рЃЏрЃљрЃњ: 41.7151">
        </div>
        <div class="mb-3">
            <label class="form-label">рЃљрЃЊрЃњрЃўрЃџрЃЏрЃЊрЃћрЃЉрЃљрЃарЃћрЃЮрЃЉрЃљ (Longitude)</label>
            <input type="text" name="longitude" class="form-control" value="{{ project.longitude|default('') }}" placeholder="рЃЏрЃљрЃњ: 44.8271">
        </div>
        <div class="mb-3">
            <label class="form-label">рЃарЃўрЃњрЃў (рЃЊрЃљрЃЉрЃљрЃџрЃў рЃарЃўрЃфрЃ«рЃЋрЃў = рЃБрЃцрЃарЃЮ рЃгрЃўрЃюрЃљ)</label>
            <input type="number" name="sort_order" class="form-control" value="{{ project.sort_order|default(0) }}" placeholder="0">
            <small class="form-text text-muted">рЃЊрЃљрЃЉрЃљрЃџрЃў рЃарЃўрЃфрЃ«рЃЋрЃў рЃюрЃўрЃерЃюрЃљрЃЋрЃА рЃБрЃцрЃарЃЮ рЃгрЃўрЃюрЃљ рЃърЃЮрЃќрЃўрЃфрЃўрЃљрЃА рЃАрЃўрЃљрЃерЃў</small>
        </div>
        
        <!-- Categories Section -->
        <div class="row mb-4">
            <div class="col-md-6">
                <h5>рЃбрЃўрЃърЃў</h5>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="type_categories" value="рЃћрЃЎрЃџрЃћрЃАрЃўрЃљ" id="type_church" 
                           {% if project.type_categories and 'рЃћрЃЎрЃџрЃћрЃАрЃўрЃљ' in project.type_categories %}checked{% endif %}>
                    <label class="form-check-label" for="type_church">рЃћрЃЎрЃџрЃћрЃАрЃўрЃљ</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="type_categories" value="рЃфрЃўрЃ«рЃћ" id="type_fortress"
                           {% if project.type_categories and 'рЃфрЃўрЃ«рЃћ' in project.type_categories %}checked{% endif %}>
                    <label class="form-check-label" for="type_fortress">рЃфрЃўрЃ«рЃћ</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="type_categories" value="рЃЏрЃБрЃќрЃћрЃБрЃЏрЃў" id="type_museum"
                           {% if project.type_categories and 'рЃЏрЃБрЃќрЃћрЃБрЃЏрЃў' in project.type_categories %}checked{% endif %}>
                    <label class="form-check-label" for="type_museum">рЃЏрЃБрЃќрЃћрЃБрЃЏрЃў</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="type_categories" value="рЃФрЃћрЃњрЃџрЃў" id="type_monument"
                           {% if project.type_categories and 'рЃФрЃћрЃњрЃџрЃў' in project.type_categories %}checked{% endif %}>
                    <label class="form-check-label" for="type_monument">рЃФрЃћрЃњрЃџрЃў</label>
                </div>
            </div>
            <div class="col-md-6">
                <h5>рЃърЃћрЃарЃўрЃЮрЃЊрЃў</h5>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="рЃЦрЃарЃўрЃАрЃбрЃћрЃерЃЮрЃЉрЃљрЃЏрЃЊрЃћ" id="period_bc"
                           {% if project.period_categories and 'рЃЦрЃарЃўрЃАрЃбрЃћрЃерЃЮрЃЉрЃљрЃЏрЃЊрЃћ' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_bc">рЃЦрЃарЃўрЃАрЃбрЃћрЃерЃЮрЃЉрЃљрЃЏрЃЊрЃћ</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="I-X рЃАрЃљрЃБрЃЎрЃБрЃюрЃћ" id="period_1_10"
                           {% if project.period_categories and 'I-X рЃАрЃљрЃБрЃЎрЃБрЃюрЃћ' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_1_10">I-X рЃАрЃљрЃБрЃЎрЃБрЃюрЃћ</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="XI-XVII рЃАрЃљрЃБрЃЎрЃБрЃюрЃћ" id="period_11_17"
                           {% if project.period_categories and 'XI-XVII рЃАрЃљрЃБрЃЎрЃБрЃюрЃћ' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_11_17">XI-XVII рЃАрЃљрЃБрЃЎрЃБрЃюрЃћ</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="1801-1918 рЃгрЃћрЃџрЃў" id="period_1801_1918"
                           {% if project.period_categories and '1801-1918 рЃгрЃћрЃџрЃў' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_1801_1918">1801-1918 рЃгрЃћрЃџрЃў</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="1918-21 рЃгрЃћрЃџрЃў" id="period_1918_21"
                           {% if project.period_categories and '1918-21 рЃгрЃћрЃџрЃў' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_1918_21">1918-21 рЃгрЃћрЃџрЃў</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="1922-53 рЃгрЃћрЃџрЃў" id="period_1922_53"
                           {% if project.period_categories and '1922-53 рЃгрЃћрЃџрЃў' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_1922_53">1922-53 рЃгрЃћрЃџрЃў</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="1954-91 рЃгрЃћрЃџрЃў" id="period_1954_91"
                           {% if project.period_categories and '1954-91 рЃгрЃћрЃџрЃў' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_1954_91">1954-91 рЃгрЃћрЃџрЃў</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="period_categories" value="1991 + рЃгрЃћрЃџрЃў" id="period_1991_plus"
                           {% if project.period_categories and '1991 + рЃгрЃћрЃџрЃў' in project.period_categories %}checked{% endif %}>
                    <label class="form-check-label" for="period_1991_plus">1991 + рЃгрЃћрЃџрЃў</label>
                </div>
            </div>
        </div>
        
        <h4>рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ</h4>
        <div id="projectInfo">
            {% if project.project_info %}
                {% for key, value in project.project_info.items() %}
                <div class="mb-2 info-pair">
                    <div class="row">
                        <div class="col-md-4">
                            <input type="text" name="info_key_{{ loop.index0 }}" class="form-control" value="{{ key }}" placeholder="рЃЋрЃћрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў">
                        </div>
                        <div class="col-md-6">
                            <input type="text" name="info_value_{{ loop.index0 }}" class="form-control" value="{{ value }}" placeholder="рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ">
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-danger btn-sm remove-info">-</button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="mb-2 info-pair">
                    <div class="row">
                        <div class="col-md-4">
                            <input type="text" name="info_key_0" class="form-control" placeholder="рЃЋрЃћрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў">
                        </div>
                        <div class="col-md-6">
                            <input type="text" name="info_value_0" class="form-control" placeholder="рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ">
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-danger btn-sm remove-info">-</button>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
        <button type="button" id="addInfo" class="btn btn-secondary btn-sm mb-3">+ рЃљрЃ«рЃљрЃџрЃў рЃЋрЃћрЃџрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ</button>
        <script>
        let infoCount = {{ project.project_info|length if project.project_info else 1 }};
        document.getElementById('addInfo').addEventListener('click', function() {
            const container = document.getElementById('projectInfo');
            const div = document.createElement('div');
            div.className = 'mb-2 info-pair';
            div.innerHTML = `
                <div class="row">
                    <div class="col-md-4">
                        <input type="text" name="info_key_${infoCount}" class="form-control" placeholder="рЃЋрЃћрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў">
                    </div>
                    <div class="col-md-6">
                        <input type="text" name="info_value_${infoCount}" class="form-control" placeholder="рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ">
                    </div>
                    <div class="col-md-2">
                        <button type="button" class="btn btn-danger btn-sm remove-info">-</button>
                    </div>
                </div>
            `;
            container.appendChild(div);
            infoCount++;
        });
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-info')) {
                e.target.closest('.info-pair').remove();
            }
        });
        </script>
        <!-- Images Section - URL Based -->
        <div class="mb-4">
            <h5>рЃАрЃБрЃарЃљрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ (URL-рЃћрЃЉрЃўрЃЌ)</h5>
            <div id="allImagesContainer">
                <!-- рЃДрЃЋрЃћрЃџрЃљ рЃАрЃБрЃарЃљрЃЌрЃў рЃћрЃарЃЌ рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃерЃў -->
                
                <!-- рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃАрЃБрЃарЃљрЃЌрЃў рЃЌрЃБ рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА -->
                {% if project.main_image %}
                <div class="row mb-2 image-url-row border p-2 rounded">
                    <div class="col-md-5">
                        <label class="form-label small">рЃАрЃБрЃарЃљрЃЌрЃўрЃА URL</label>
                        <input type="url" name="all_image_url_main" class="form-control" 
                               value="{% if 'http' in project.main_image %}{{ project.main_image }}{% else %}/projects/{{ project.folder }}/{{ project.main_image }}{% endif %}" 
                               placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label small">рЃљрЃдрЃгрЃћрЃарЃљ</label>
                        <input type="text" name="all_image_caption_main" class="form-control" 
                               value="{{ project.main_image_caption|default('') }}" placeholder="рЃАрЃБрЃарЃљрЃЌрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃАрЃБрЃарЃљрЃЌрЃў</label>
                        <div class="form-check">
                            <input type="radio" name="main_image_selector" value="main" checked class="form-check-input">
                            <label class="form-check-label">рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў</label>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small">&nbsp;</label>
                        <button type="button" class="btn btn-danger btn-sm d-block remove-image">рЃгрЃљрЃерЃџрЃљ</button>
                    </div>
                </div>
                {% endif %}
                
                <!-- рЃАрЃ«рЃЋрЃљ рЃАрЃБрЃарЃљрЃЌрЃћрЃЉрЃў -->
                {% if project.other_images %}
                    {% for img in project.other_images %}
                    <div class="row mb-2 image-url-row border p-2 rounded">
                        <div class="col-md-5">
                            <label class="form-label small">рЃАрЃБрЃарЃљрЃЌрЃўрЃА URL</label>
                            <input type="url" name="all_image_url_{{ loop.index0 }}" class="form-control" 
                                   value="{% if img.url %}{{ img.url }}{% elif img.file %}/projects/{{ project.folder }}/{{ img.file }}{% endif %}" 
                                   placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label small">рЃљрЃдрЃгрЃћрЃарЃљ</label>
                            <input type="text" name="all_image_caption_{{ loop.index0 }}" class="form-control" 
                                   value="{{ img.caption|default('') }}" placeholder="рЃАрЃБрЃарЃљрЃЌрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small">рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃАрЃБрЃарЃљрЃЌрЃў</label>
                            <div class="form-check">
                                <input type="radio" name="main_image_selector" value="{{ loop.index0 }}" class="form-check-input"
                                       {% if (img.file and img.file == project.main_image) or (img.url and img.url == project.main_image) %}checked{% endif %}>
                                <label class="form-check-label">рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small">&nbsp;</label>
                            <button type="button" class="btn btn-danger btn-sm d-block remove-image">рЃгрЃљрЃерЃџрЃљ</button>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
            </div>
            
            <div class="row mt-3">
                <div class="col-md-12">
                    <button type="button" id="addImageUrl" class="btn btn-success btn-sm">+ рЃљрЃ«рЃљрЃџрЃў рЃАрЃБрЃарЃљрЃЌрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ</button>
                    <small class="text-muted d-block mt-2">
                        ­ЪњА рЃДрЃЋрЃћрЃџрЃљ рЃАрЃБрЃарЃљрЃЌрЃў URL-рЃўрЃЌ рЃљрЃбрЃЋрЃўрЃарЃЌрЃћрЃЌ. рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃАрЃБрЃарЃљрЃЌрЃў рЃарЃљрЃЊрЃўрЃЮ рЃдрЃўрЃџрЃљрЃЎрЃўрЃЌ рЃЏрЃЮрЃюрЃўрЃерЃюрЃћрЃЌ.
                    </small>
                </div>
            </div>
        </div>

        <!-- File Upload Section -->
        <div class="mb-4">
            <h5>рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ (рЃЎрЃЮрЃЏрЃърЃўрЃБрЃбрЃћрЃарЃўрЃЊрЃљрЃю)</h5>
            <div class="alert alert-info">
                <strong>рЃљрЃ«рЃљрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў:</strong> рЃљрЃ«рЃџрЃљ рЃерЃћрЃњрЃўрЃФрЃџрЃўрЃљрЃЌ рЃцрЃЮрЃбрЃЮрЃћрЃЉрЃў рЃЊрЃљ 3D рЃцрЃљрЃўрЃџрЃћрЃЉрЃў рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃЎрЃЮрЃЏрЃърЃўрЃБрЃбрЃћрЃарЃўрЃЊрЃљрЃю рЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃЮрЃЌ. рЃцрЃљрЃўрЃџрЃћрЃЉрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃћрЃЉрЃљ Cloudinary-рЃќрЃћ.
            </div>

            <!-- Image Files Upload -->
            <div class="mb-3">
                <label class="form-label">рЃцрЃЮрЃбрЃЮрЃћрЃЉрЃўрЃА рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ</label>
                <input type="file" name="image_files" class="form-control" multiple accept="image/*">
                <small class="form-text text-muted">рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ рЃЏрЃарЃљрЃЋрЃљрЃџрЃў рЃцрЃЮрЃбрЃЮ (JPG, PNG, GIF, WebP)</small>
            </div>

            <!-- 3D Model Files Upload -->
            <div class="mb-3">
                <label class="form-label">3D рЃЏрЃЮрЃЊрЃћрЃџрЃћрЃЉрЃўрЃА рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ</label>
                <input type="file" name="model_files" class="form-control" multiple accept=".obj,.stl,.gltf,.glb,.fbx,.dae,.3ds,.zip">
                <small class="form-text text-muted">рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ 3D рЃцрЃљрЃўрЃџрЃћрЃЉрЃў (OBJ, STL, GLTF, GLB, FBX, DAE, 3DS) рЃљрЃю ZIP рЃцрЃљрЃўрЃџрЃћрЃЉрЃў SuperSplat Editor-рЃЊрЃљрЃю</small>
            </div>

            <!-- Description File Upload -->
            <div class="mb-3">
                <label class="form-label">рЃљрЃдрЃгрЃћрЃарЃўрЃА рЃцрЃљрЃўрЃџрЃўрЃА рЃљрЃю 3D ZIP рЃцрЃљрЃўрЃџрЃўрЃА рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ</label>
                <input type="file" name="description_file" class="form-control" accept=".txt,.md,.html,.doc,.docx,.zip">
                <small class="form-text text-muted">
                    рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ рЃбрЃћрЃЦрЃАрЃбрЃБрЃарЃў рЃцрЃљрЃўрЃџрЃў (TXT, MD, HTML, DOC, DOCX) рЃљрЃю 3D ZIP рЃцрЃљрЃўрЃџрЃў (SuperSplat Editor-рЃЊрЃљрЃю).<br>
                    ZIP рЃцрЃљрЃўрЃџрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў HTML рЃерЃўрЃюрЃљрЃљрЃарЃАрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃЏрЃЮрЃўрЃдрЃћрЃЉрЃљ рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃБрЃџрЃў рЃўрЃЦрЃюрЃћрЃЉрЃљ 3D viewer-рЃўрЃАрЃЌрЃЋрЃўрЃА.
                </small>
            </div>
        </div>
        
        <script>
        // Image URL fields functionality
        let imageCount = {{ project.other_images|length if project.other_images else 0 }};
        
        document.getElementById('addImageUrl').addEventListener('click', function() {
            const container = document.getElementById('allImagesContainer');
            const div = document.createElement('div');
            div.className = 'row mb-2 image-url-row border p-2 rounded';
            div.innerHTML = `
                <div class="col-md-5">
                    <label class="form-label small">рЃАрЃБрЃарЃљрЃЌрЃўрЃА URL</label>
                    <input type="url" name="all_image_url_${imageCount}" class="form-control" placeholder="https://example.com/image.jpg">
                </div>
                <div class="col-md-3">
                    <label class="form-label small">рЃљрЃдрЃгрЃћрЃарЃљ</label>
                    <input type="text" name="all_image_caption_${imageCount}" class="form-control" placeholder="рЃАрЃБрЃарЃљрЃЌрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ">
                </div>
                <div class="col-md-2">
                    <label class="form-label small">рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃАрЃБрЃарЃљрЃЌрЃў</label>
                    <div class="form-check">
                        <input type="radio" name="main_image_selector" value="${imageCount}" class="form-check-input">
                        <label class="form-check-label">рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <label class="form-label small">&nbsp;</label>
                    <button type="button" class="btn btn-danger btn-sm d-block remove-image">рЃгрЃљрЃерЃџрЃљ</button>
                </div>
            `;
            container.appendChild(div);
            imageCount++;
        });
        
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-image')) {
                e.target.closest('.image-url-row').remove();
            }
        });
        
        // Show loading modal on form submit
        document.querySelector('button[type="submit"]').addEventListener('click', function(e) {
            // Check if any files are selected
            const imageFiles = document.querySelector('input[name="image_files"]').files;
            const modelFiles = document.querySelector('input[name="model_files"]').files;
            const descFile = document.querySelector('input[name="description_file"]').files;
            
            const hasFiles = (imageFiles && imageFiles.length > 0) || 
                            (modelFiles && modelFiles.length > 0) || 
                            (descFile && descFile.length > 0);
            
            if (hasFiles) {
                // Show loading modal
                const modal = document.createElement('div');
                modal.className = 'modal fade show';
                modal.style.display = 'block';
                modal.innerHTML = `
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ...</h5>
                            </div>
                            <div class="modal-body text-center">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ...</span>
                                </div>
                                <p class="mt-3">рЃњрЃЌрЃ«рЃЮрЃЋрЃЌ рЃЊрЃљрЃћрЃџрЃЮрЃЊрЃЮрЃЌ, рЃцрЃљрЃўрЃџрЃћрЃЉрЃў рЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃћрЃЉрЃљ...</p>
                                <div class="progress mt-3">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div>
                                </div>
                                <small class="text-muted mt-2">3D ZIP рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃљ рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃЊрЃўрЃЊрЃ«рЃљрЃюрЃА рЃњрЃљрЃАрЃбрЃљрЃюрЃЮрЃА</small>
                            </div>
                        </div>
                    </div>
                    <div class="modal-backdrop fade show"></div>
                `;
                document.body.appendChild(modal);
            }
        });
        </script>
        <button type="submit" class="btn btn-primary">рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ</button>
        <a href="/admin/panel" class="btn btn-link">рЃБрЃЎрЃљрЃю</a>
    </form>
</div>
</body>
</html>
